package api.rest;

import static com.jayway.restassured.RestAssured.*;
import static org.hamcrest.Matchers.*;

import java.io.IOException;

import static com.jayway.restassured.module.jsv.JsonSchemaValidator.*;
import org.junit.Test;


public class TestAPI {
	
	public TestAPI() {
		baseURI = "https://jsonplaceholder.typicode.com/todos/";
	}

	@Test
	public void test() {
		
		
		 given()
		 .when()
		    .get("/1")
		 .then()
		    .statusCode(200)
		    .body("userId", is(1))
		    .body("id", is(1))
		    .body("title", equalTo("delectus aut autem"))
		    .body("completed", equalTo(false))
		    .assertThat()
		       .body(matchesJsonSchemaInClasspath("schema.json"));
		 
		 String msgSlack = "curl -X POST -H 'Content-type: application/json' --data '{\"text\":\"Thiago Benites. Teste AtomicSolutions\"}' https://hooks.slack.com/services/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";
		 
		 try {
			Runtime.getRuntime().exec(msgSlack);
		} catch (IOException e) {
			System.out.println("Não foi possível enviar mensagem ao Slack");
			e.printStackTrace();
		}
	}

}
